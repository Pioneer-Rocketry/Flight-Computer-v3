name: Build

on: [push,]

jobs:
  build_CM4:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v4
      - name: Build docker image
        run: docker buildx build .devcontainer/ -t build_container
      - name: Build CM4 Clean
        run: docker run -it -v $PWD:/srv -w/srv build_container make -C Makefile/CM4 clean
      - name: Build CM4 Make
        run: docker run -it -v $PWD:/srv -w/srv build_container make -C Makefile/CM4                                                        